(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"47MB":function(e,t,a){"use strict";function n(){return m.a.createElement(b.a,{gutter:[20,20],justify:"center",className:"placeholder",style:{width:"100%"}},m.a.createElement(w.a,{span:24},m.a.createElement("div",{className:"placeholder-block head"},m.a.createElement(b.a,{justify:"center"},m.a.createElement(w.a,{span:22},m.a.createElement(I.a,{className:"skeleto",paragraph:{rows:1},avatar:!0}))))),m.a.createElement(w.a,{span:24},m.a.createElement(b.a,{gutter:[20,20],justify:"center"},m.a.createElement(w.a,{span:22},m.a.createElement(b.a,{gutter:20},m.a.createElement(w.a,{span:6},m.a.createElement("div",{className:"placeholder-block val"},m.a.createElement(I.a,{paragraph:{rows:1},className:"skeleto"}))),m.a.createElement(w.a,{span:6},m.a.createElement("div",{className:"placeholder-block val"},m.a.createElement(I.a,{paragraph:{rows:1},className:"skeleto"}))),m.a.createElement(w.a,{span:6},m.a.createElement("div",{className:"placeholder-block val"},m.a.createElement(I.a,{paragraph:{rows:1},className:"skeleto"}))),m.a.createElement(w.a,{span:6},m.a.createElement("div",{className:"placeholder-block val"},m.a.createElement(I.a,{paragraph:{rows:1},className:"skeleto"}))))),m.a.createElement(w.a,{span:22},m.a.createElement("div",{className:"placeholder-block cell"},m.a.createElement(I.a,{className:"skeleto"}))),m.a.createElement(w.a,{span:22},m.a.createElement("div",{className:"placeholder-block cell"},m.a.createElement(I.a,{className:"skeleto"}))))))}a.r(t);var l=a("o0o1"),r=a.n(l),o=(l=a("lSNA"),a.n(l)),c=(l=a("yXPU"),a.n(l)),i=(l=a("J4zp"),a.n(l)),s=a("q1tI"),m=a.n(s),u=a("yP6+"),p=(u.Guide.Line,Object(u.getTheme)().colors10),d=m.a.memo((function(e){var t=Object(s.useState)([]),a=i()(t,2),n=(t=a[0],a[1]);Object(s.useEffect)((function(){var t;e.flow.length&&e.data.length&&(t=e.data.map((function(t,a){function n(e){return e.date===t.date}return t.passengerFlowCount=e.flow.some(n)?e.flow.filter(n).passengerFlowCount:0,t})),n(t))}),[e.flow,e.data]);var l=!1;return m.a.createElement(s.Fragment,null,t.length&&m.a.createElement(u.Chart,{scale:{date:{type:"timeCat",range:[0,1],mask:"YYYY-MM-DD"},totalTradeAmt:{min:0},totalTradeCnt:{min:0}},height:400,data:t,padding:[50,40,70,40],autoFit:!0},m.a.createElement(u.Legend,{layout:"horizontal",custom:!0,position:"left-top",items:[{value:"totalTradeAmt",name:"\u9500\u552e\u989d"},{value:"passengerFlowCount",name:"\u5ba2\u6d41\u91cf"},{value:"totalTradeCnt",name:"\u8ba2\u5355\u6570"}]}),m.a.createElement(u.Axis,{name:"date"}),m.a.createElement(u.Axis,{position:"date*totalTradeCnt"}),m.a.createElement(u.Axis,{position:"date*passengerFlowCount"}),m.a.createElement(u.Axis,{position:"date*totalTradeAmt"}),m.a.createElement(u.LineAdvance,{point:!0,area:!0,shape:"smooth",position:"date*totalTradeAmt",color:p[0],tooltip:["date*totalTradeAmt",function(e,t){return{name:"\u9500\u552e\u989d",value:t}}]}),m.a.createElement(u.LineAdvance,{point:!0,area:!0,shape:"smooth",position:"date*totalTradeCnt",color:p[1],tooltip:["date*totalTradeCnt",function(e,t){return{name:"\u5ba2\u6d41\u91cf",value:t}}]}),m.a.createElement(u.LineAdvance,{point:!0,area:!0,shape:"smooth",position:"date*passengerFlowCount",color:p[2],tooltip:["date*passengerFlowCount",function(e,t){return{name:"\u8ba2\u5355\u6570",value:t}}]}),m.a.createElement(u.Tooltip,{shared:!0,showCrosshairs:!0}),m.a.createElement(u.Slider,{start:0,formatter:function(e,t,a){return l=!l,"".concat(e).concat(l?"\u5f00\u59cb":"\u7ed3\u675f")}})))})),E=(l=a("pVnL"),a.n(l)),f=u.Guide.Line,v={label:{style:{textAlign:"center"}},line:{style:{stroke:"#eeeeee"}},grid:{line:{style:{stroke:"#eeeeee"}}}},h=m.a.memo((function(e){return m.a.createElement(s.Fragment,null,(null==e?void 0:e.data)&&m.a.createElement(u.Chart,{height:400,data:null==e?void 0:e.data,scale:{dates:{range:[0,1],type:"timeCat"},first:{min:0}},padding:[40,40,40,40],autoFit:!0},m.a.createElement(u.Legend,{position:"left-top",name:"totalTradeAmt",title:{spacing:10,style:{textAlign:"center",fill:"#404040",fontSize:"12",fontWeight:"bold",textBaseline:"top"}}}),m.a.createElement(u.Tooltip,null),m.a.createElement(u.Axis,E()({name:"date"},v)),m.a.createElement(u.Axis,E()({name:"passengerFlowCount"},v,{label:{offset:10}})),m.a.createElement(u.LineAdvance,{point:{size:4},area:!0,shape:"smooth",position:"date*passengerFlowCount",size:2,tooltip:["date*passengerFlowCount",function(e,t){return{name:"\u5ba2\u670d\u5206\u53d1\u91cf",value:t}}]}),m.a.createElement(f,{top:!0,lineStyle:{lineWidth:2}})))})),g=a("Qcty"),b=a("BMrR"),y=a("3S7+"),w=a("kPKH"),C=a("bx4M"),j=a("bf48"),O=a("zeV3"),k=a("PArb"),D=a("sGsY"),F=a("9yH6"),N=a("gFTJ"),T=a("VXEj"),Y=a("wFql"),A=a("mr32"),x=a("k82f"),M=a("Nlzp"),P=a("5psM"),S=a("0iz5"),z=(l=a("wd/R"),a.n(l)),I=a("/ezw");function L(e,t){var a,n=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)),n}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=e.data;e=e.position;return m.a.createElement(u.Chart,{height:44,pure:!0,autoFit:!0,data:t,appendPadding:[0,0,0,0]},m.a.createElement(u.Line,{position:e,shape:"smooth"}),m.a.createElement(u.Tooltip,null),m.a.createElement(u.Geom,{position:e,shape:"smooth",type:"area",tooltip:[e,function(e,t){return{name:"\u9500\u552e\u989d",value:t}}]}))}function B(e){var t=e.data;e=e.position;return m.a.createElement(u.Chart,{pure:!0,height:44,data:t,autoFit:!0},m.a.createElement(u.Line,{position:e,shape:"smooth"}),m.a.createElement(u.Tooltip,null),m.a.createElement(u.Geom,{type:"area",position:e,shape:"smooth",tooltip:[e,function(e,t){return{name:"\u5ba2\u6d41\u91cf",value:t}}]}))}function H(e){var t=e.data;e=e.position;return m.a.createElement(u.Chart,{pure:!0,height:44,data:t,autoFit:!0},m.a.createElement(u.Tooltip,{shared:!0}),m.a.createElement(u.Interval,{position:e,tooltip:[e,function(e,t){return{name:"\u652f\u4ed8\u7b14\u6570",value:t}}]}))}function J(e){var t=e.data;e=e.position;return m.a.createElement(u.Chart,{pure:!0,height:44,data:t,autoFit:!0,color:"ff3355"},m.a.createElement(u.Line,{position:e,shape:"smooth",size:2}),m.a.createElement(u.Tooltip,null),m.a.createElement(u.Geom,{type:"area",position:e,shape:"smooth",visible:!1,tooltip:[e,function(e,t){return{name:"\u5ba2\u5355\u4ef7",value:t}}]}))}function V(e){return m.a.createElement(b.a,{justify:"space-between"},m.a.createElement("span",null,e.title),m.a.createElement(y.a,{title:e.tip},m.a.createElement("i",{className:"sale-info-icon ico-info"})))}function W(e){return e=e.children,m.a.createElement("div",{style:{height:400}},m.a.createElement(x.Scrollbars,null,e))}t.default=m.a.memo((function(e){var t,a,l,o,u=Object(P.a)("login"),p=(L=i()(u,1)[0]).appId,E=L.operatorName,f=L.headImgUrl,v=L.merchantName,y=z()(new Date).format("YYYYMMDD"),x=[y,(U=function(e){return z()().subtract(e,"days").format("YYYYMMDD")})(7),U(30)],I=[{appId:p,beginDate:x[2],endDate:y}],L=(u=Object(S.b)(M.u,{defaultParams:I,manual:!0,formatResult:function(e){return e.result}})).data,q=u.run,U=(u.loading,Object(s.useState)({appId:p,beginDate:x[2],endDate:y})),X=(I=i()(U,2))[0],K=I[1],Q=(u=Object(s.useState)(!1),I=(U=i()(u,2))[0],U[1]),Z=(u=Object(s.useState)({}),u=(U=i()(u,2))[0],U[1]),$=(U=Object(S.b)(M.f,{formatResult:function(e){return e.result},initialData:{}}).data,Object(s.useCallback)(c()(r.a.mark((function e(){var t,a,n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q(!0),q(X),e.next=5,Promise.all([Object(M.N)(X),Object(M.G)(X),Object(M.u)(X),Object(M.H)(X)]);case 5:t=e.sent,n=t.map((function(e){return e.result||{}})),a=i()(n,4),l=a[0],t=a[1],n=a[2],a=a[3],n=G({items:[],data:{}},n),l=l.map((function(e){return G({date:(t=e.date,z()(t,"YYYYMMDD").format("YYYY-MM-DD"))},e.statistics);var t})),Z({trad:l,rank:t,sale:n,flow:a});case 11:return e.prev=11,Q(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,,11,14]])}))),[X]));return Object(s.useEffect)((function(){$()}),[X]),m.a.createElement(s.Fragment,null,I?m.a.createElement(n,null):m.a.createElement(s.Fragment,null,u.trad&&u.flow&&u.rank&&u.sale&&m.a.createElement(s.Fragment,null,m.a.createElement(w.a,{span:24},m.a.createElement(C.a,null,m.a.createElement(b.a,{justify:"center"},m.a.createElement(w.a,{span:22},m.a.createElement(j.a,{style:{padding:0,margin:"0 -24px"},avatar:{src:f,size:56},title:m.a.createElement("div",null,m.a.createElement("h4",{style:{margin:0}},"".concat(E,",").concat((f=(new Date).getHours(),E="",0<=f&&f<=10?E="\u65e9\u4e0a\u597d!":10<f&&f<=14?E="\u4e2d\u5348\u597d!":14<f&&f<=18?E="\u4e0b\u5348\u597d!":18<f&&f<=24&&(E="\u665a\u4e0a\u597d!"),E))),m.a.createElement("div",{style:{fontSize:14,fontWeight:"normal"}},v)),extra:[m.a.createElement(O.b,{key:"1",size:"large",split:m.a.createElement(k.a,{type:"vertical"})},m.a.createElement(D.a,{title:"\u95e8\u5e97\u6570",value:null==U?void 0:U.merchantCount}),m.a.createElement(D.a,{title:"\u5f53\u524d\u4eba\u6d41\u91cf",value:null==U?void 0:U.passengerFlowCount}),m.a.createElement(D.a,{title:"\u4efb\u52a1\u6570",value:null==U?void 0:U.inOutRecordCount}))]}))))),m.a.createElement(b.a,{gutter:[20,20],justify:"center",style:{marginTop:10}},m.a.createElement(w.a,{span:22},m.a.createElement(b.a,{gutter:15},m.a.createElement(w.a,{span:6},m.a.createElement(C.a,null,m.a.createElement(D.a,{title:m.a.createElement(V,{title:"\u9500\u552e\u989d(\u5143)",tip:"\u603b\u9500\u552e\u989d"}),precision:2,value:null===(U=u.sale)||void 0===U||null===(t=U.data)||void 0===t?void 0:t.totalAmt}),m.a.createElement(R,{data:null==u?void 0:u.trad,position:"date*totalTradeAmt"}))),m.a.createElement(w.a,{span:6},m.a.createElement(C.a,null,m.a.createElement(D.a,{title:m.a.createElement(V,{title:"\u5ba2\u6d41\u91cf(\u4eba)",tip:"\u95e8\u5e97\u8bbf\u5ba2\u6d41\u91cf"}),value:(o=null==u?void 0:u.flow,"passengerFlowCount",o.reduce((function(e,t){return e+t.passengerFlowCount}),0))}),m.a.createElement(B,{data:null==u?void 0:u.flow,position:"date*passengerFlowCount"}))),m.a.createElement(w.a,{span:6},m.a.createElement(C.a,{footer:m.a.createElement(m.a.Fragment,null,"\u5546\u54c1\u603b\u9500\u552e\u6570\u91cf\uff1a",null===(t=u.sale)||void 0===t?void 0:t.data.totalGoodsCnt)},m.a.createElement(D.a,{title:m.a.createElement(V,{title:"\u652f\u4ed8\u7b14\u6570(\u7b14)",tip:"\u652f\u4ed8\u6210\u529f\u7684\u8ba2\u5355\u91cf"}),value:null===(t=u.sale)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.tradeOrderCnt}),m.a.createElement(H,{data:null==u?void 0:u.trad,position:"date*totalTradeCnt"}))),m.a.createElement(w.a,{span:6},m.a.createElement(C.a,null,m.a.createElement(D.a,{precision:2,title:m.a.createElement(V,{title:"\u5ba2\u5355\u4ef7(\u5143)",tip:"\u5ba2\u5355\u4ef7=\u9500\u552e\u989d/\u8ba2\u5355\u6570\u91cf"}),value:(null===(a=u.sale)||void 0===a?void 0:a.data.totalAmt)/(null===(a=u.sale)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.tradeOrderCnt)||"0.00"}),m.a.createElement(J,{data:null==u?void 0:u.trad,position:"date*totalTradeAmt"}))))),m.a.createElement(w.a,{span:22},m.a.createElement(C.a,{extra:[m.a.createElement(O.b,{key:"2",justify:"space-between"},m.a.createElement(F.a.Group,{defaultValue:2,onChange:function(e){return e=e.target,K({appId:p,beginDate:x[e.value],endDate:y})}},["\u4eca\u5929","\u8fd1\u4e00\u5468","\u8fd130\u65e5"].map((function(e,t){return m.a.createElement(F.a.Button,{key:t,value:t},e)}))),m.a.createElement(g.a,{format:"YYYYMMDD",showTime:!1,onChange:function(e){e=(t=i()(e,2))[0];var t=t[1];K(G(G({},X),{},{beginDate:e,endDate:t}))}}))],title:m.a.createElement(g.b,{value:null==X?void 0:X.merchantCode,onChange:function(e){return K(G(G({},X),{},{merchantCode:e}))},placeholder:"\u6240\u6709\u95e8\u5e97"})},m.a.createElement(b.a,{gutter:15},m.a.createElement(w.a,{span:18},m.a.createElement(d,{data:null==u?void 0:u.trad,flow:null==u?void 0:u.flow})),m.a.createElement(w.a,{span:6,style:{height:400}},m.a.createElement(N.a,{title:"\u95e8\u5e97\u9500\u552e\u6392\u884c",style:{margin:0}}),m.a.createElement(W,null,m.a.createElement(T.b,{dataSource:null==u?void 0:u.rank,renderItem:function(e,t){return m.a.createElement(T.b.Item,{key:t,extra:m.a.createElement(Y.a.Text,{type:"secondary"},"\u9500\u91cf:",e.value)},m.a.createElement(T.b.Item.Meta,{avatar:m.a.createElement(b.a,{className:"sale-avatar"},m.a.createElement(A.a,{className:"sale-tag",color:"#f50"},t+1)),title:e.name,description:e.merchantCode}))}})))))),m.a.createElement(w.a,{span:22},m.a.createElement(C.a,null,m.a.createElement(b.a,{gutter:"20"},m.a.createElement(w.a,{span:18,setyle:{height:300}},m.a.createElement(N.a,{title:"\u5ba2\u670d\u5206\u53d1\u91cf",style:{margin:0}}),m.a.createElement(h,{data:null==u?void 0:u.flow})),m.a.createElement(w.a,{span:6},m.a.createElement(N.a,{title:"\u5546\u54c1\u9500\u91cf\u6392\u884c"}),m.a.createElement(W,null,m.a.createElement(T.b,{dataSource:L,style:{height:300},renderItem:function(e,t){return m.a.createElement(T.b.Item,{key:t,extra:m.a.createElement(Y.a.Text,{type:"secondary"},"\u9500\u91cf:",e.goodsCnt)},m.a.createElement(T.b.Item.Meta,{avatar:m.a.createElement(b.a,{justify:"center",className:"sale-avatar"},m.a.createElement(A.a,{className:"sale-tag",color:"red"},t+1)),title:m.a.createElement(O.b,null,e.goodsName),description:e.merchantName}))}}))))))))))}))}}]);