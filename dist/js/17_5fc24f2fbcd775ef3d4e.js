(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{FGav:function(e,t,a){"use strict";a.r(t);var n=a("pVnL"),r=a.n(n),l=(n=a("lSNA"),a.n(n)),c=(n=a("J4zp"),a.n(n)),o=a("q1tI"),m=a.n(o),i=a("Nlzp"),s=a("5psM"),u=a("0iz5"),d=a("EUoS"),p=(n=a("vlZx"),a.n(n)),E=(a("riYV"),a("udzn")),f=a("Qcty"),b=a("TeRw"),h=a("Vl3Y"),y=a("tsqr"),g=a("zeV3"),w=a("PArb"),C=a("diRs"),O=a("BMrR"),v=a("kPKH"),j=a("2fM7"),P=a("9yH6"),I=a("5rEg"),D=a("2/Rp"),M=a("wCAj"),k=(n=a("wd/R"),a.n(n));function T(e,t){var a,n=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)),n}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=m.a.memo((function(e){var t=h.a.useForm(),a=c()(t,1)[0],n=Object(s.a)("login"),l=c()(n,1)[0].appId,T=function(e){return k()().subtract(e,"days").format("YYYY-MM-DD hh:mm:ss")},Y=k()(new Date).format("YYYY-MM-DD hh:mm:ss"),F=[T(1),Y,T(7),T(30)],S=Object(o.useState)({startTime:F[2],endTime:Y}),A=(n=(t=c()(S,2))[0],t[1]),B={startTime:F[2],endTime:Y},V=(S=(T=Object(u.b)(i.J,{defaultParams:[{appId:l}]})).data,t=T.loading,S&&S.result[0].merchantCode),_=(T=[{base:R({appId:l,merchantCode:V},n),pageSize:10},{time:2}],l={form:a,defaultParams:T,onSuccess:function(e){"FAILED"===e.code&&b.a.warning({message:"\u64cd\u4f5c\u5931\u8d25",duration:null,description:e.msg})},paginated:!0,cacheKey:"list"},(n=Object(d.a)(i.R,R(R({},l),{},{ready:!!S}))).tableProps),x=(l=(T=n.search).submit,T.reset),z=Object(o.useRef)(null);return Object(o.useEffect)((function(){a.setFieldsValue({merchantCode:V})}),[S]),n={wrapperCol:{offset:4,span:14}},T=[{title:"\u95e8\u5e97\u540d\u79f0",dataIndex:"store_name"},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"device_name"},{title:"MAC",dataIndex:"mac"},{title:"\u65f6\u95f4",dataIndex:"video_start_time"},{title:"\u64cd\u4f5c",key:"action",width:150,align:"center",render:function(e,t,a){return m.a.createElement(g.b,{split:m.a.createElement(w.a,{type:"vertical"})},m.a.createElement(C.a,{placement:"bottomRight",onVisibleChange:function(e){!e&&z.current&&z.current.load()},content:m.a.createElement("div",{style:{width:440}},m.a.createElement(E.Player,{ref:function(e){z.current=e}},m.a.createElement(E.BigPlayButton,{position:"center"}),m.a.createElement(E.ControlBar,null,m.a.createElement(E.ReplayControl,{seconds:10,order:1.1}),m.a.createElement(E.ForwardControl,{seconds:30,order:1.2}),m.a.createElement(E.CurrentTimeDisplay,{order:4.1}),m.a.createElement(E.TimeDivider,{order:4.2}),m.a.createElement(E.PlaybackRateMenuButton,{rates:[5,2,1,.5,.1],order:7.1}),m.a.createElement(E.VolumeMenuButton,{vertical:!0})),m.a.createElement("source",{src:null==t?void 0:t.url}))),title:"\u89c6\u9891\u56de\u770b",trigger:"click"},m.a.createElement("a",null,"\u89c6\u9891\u56de\u770b")))}}],m.a.createElement("div",null,m.a.createElement(h.a,r()({style:{marginBottom:30},form:a},{labelCol:{span:4},wrapperCol:{span:14}}),m.a.createElement(O.a,null,m.a.createElement(v.a,{span:12},m.a.createElement(h.a.Item,{name:"date",label:"\u89c6\u9891\u65e5\u671f"},m.a.createElement(f.a,{onChange:function(e){a.resetFields(["time"]),null!=e&&e.length&&e[0]?(e={startTime:e[0],endTime:e[1]},A(e)):A(B)}}))),m.a.createElement(v.a,{span:12},m.a.createElement(h.a.Item,{name:"merchantCode",label:"\u95e8\u5e97"},m.a.createElement(j.a,{style:{width:"100%"},loading:t,placeholder:"\u9009\u62e9\u95e8\u5e97"},S&&S.result.map((function(e,t){return m.a.createElement(j.a.Option,{key:t,value:e.merchantCode},e.merchantName)})))))),m.a.createElement(O.a,null,m.a.createElement(v.a,{span:12},m.a.createElement(h.a.Item,{name:"time",label:"\u603b\u4f53\u7b5b\u9009"},m.a.createElement(P.a.Group,{onChange:function(e){e=e.target,e={startTime:F[e.value],endTime:Y},a.resetFields(["date"]),A(e)}},["\u6628\u65e5","\u4eca\u65e5","\u8fd17\u5929","\u8fd130\u5929"].map((function(e,t){return m.a.createElement(P.a.Button,{value:t,key:t},e)}))))),m.a.createElement(v.a,{span:12},m.a.createElement(h.a.Item,{name:"mac",label:"MAC"},m.a.createElement(I.a,{placeholder:"\u8bf7\u8f93\u5165MAC"})))),m.a.createElement(O.a,null,m.a.createElement(v.a,{span:12},m.a.createElement(h.a.Item,n,m.a.createElement(g.b,null,m.a.createElement(D.a,{type:"primary",onClick:l},"\u7b5b\u9009"),m.a.createElement(D.a,{type:"default",disabled:!_.dataSource.length,onClick:function(){var e={fileName:"download"};e.datas=[{sheetData:_.dataSource,sheetFilter:["store_name","device_name","mac","video_start_time"],sheetHeader:["\u95e8\u5e97\u540d\u79f0","\u8bbe\u5907\u540d\u79f0","MAC","\u65f6\u95f4"],columnWidths:[20,20,20,20]}],new p.a(e).saveExcel(),y.b.success("\u5bfc\u51fa\u6210\u529f")}},"\u5bfc\u51fa"),m.a.createElement(D.a,{type:"default",onClick:function(){A(B),x(),a.setFieldsValue({time:2,merchantCode:V})}},"\u91cd\u7f6e")))))),m.a.createElement(M.a,r()({columns:T},_,{rowKey:"url"})))}))}}]);