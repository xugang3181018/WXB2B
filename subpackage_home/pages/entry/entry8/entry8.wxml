<movable-area class="movable-area" scale-area="false">
  <form bind:submit="nextStep" class="entry8">
    <progress percent="{{progress}}" activeColor="#5177BE" backgroundColor="#f7f7f7" active="true" duration="10" active-mode="forwards" class="progress" />
    <view class="fliiBox"></view>
    <block wx:if="{{step === 1}}">
      <view class="moduleContent" style="background: #f7f7f7;">
        <block wx:if="{{pattern === 'store'}}">
          <view>
            <text>门店名称</text>
            <text>{{storeFullName}}</text>
          </view>
          <view>
            <text>门店编号</text>
            <text>{{storeNo}}</text>
          </view>
        </block>
        <view>
          <text>商户名称</text>
          <text>{{merchantFullName}}</text>
        </view>
        <view>
          <text>商户编号</text>
          <text>{{merchantCode}}</text>
        </view>
      </view>
      <view class="moduleContent">
        <view>
          <text>配置名称</text>
          <input class="config" type="text" name="configureName" placeholder="请输入配置名称" value="{{configureName}}" maxlength="100" placeholder-class="placeholder" />
        </view>
      </view>
      <view class="notes">默认值，可编辑，主要在门店配置支付中进行选择。</view>
      <view class="moduleContent" style="margin-bottom: 32rpx">
        <view class="inputColor">
          <text>通道名称</text>
          <picker range="{{channel.list}}" bindchange="changeData" data-type="channel" value="{{channel.index}}">
            <view>
              <text wx:if='{{channel.index === null}}' style="font-size: 24rpx">选择通道</text>
              <text wx:else class="normalColor">{{channel.list[channel.index]}}</text>
              <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
            </view>
          </picker>
        </view>
        <view class="inputColor">
          <text>支付宝费率</text>
          <picker range="{{alipay.list}}" bindchange="rateChange" data-type="alipay" disabled="{{channel.index === null}}" value="{{alipay.index}}">
            <view>
              <text bind:tap="chooseChannel" wx:if='{{alipay.index === null}}' style="font-size: 24rpx">请选择支付宝交易费率</text>
              <text wx:else style="color: #333">{{alipay.list[alipay.index]}}</text>
              <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
            </view>
          </picker>
        </view>
        <view class="inputColor">
          <text>微信费率</text>
          <picker range="{{wechat.list}}" bindchange="rateChange" data-type="wechat" disabled="{{channel.index === null}}" value="{{wechat.index}}}">
            <view>
              <text bind:tap="chooseChannel" wx:if='{{wechat.index === null}}' style="font-size: 24rpx">请选择微信交易费率</text>
              <text wx:else style="color: #333">{{wechat.list[wechat.index]}}</text>
              <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
            </view>
          </picker>
        </view>
      </view>
      <view class="moduleContent">
        <view class="inputColor">
          <text>配置备注(可空)</text>
          <input type="text" name="configureRemark" value="{{configureRemark}}" placeholder="请输入配置备注" maxlength="15" placeholder-class="placeholder" />
        </view>
        <view class="inputColor">
          <text>经营类目</text>
          <view bind:tap="linkTo" data-url="../category/category?passType=8&type={{type}}">
            <text wx:if="{{!businessCategoryName}}" style="font-size: 24rpx">请选择</text>
            <text wx:else style="color: #333333">{{businessCategoryName}}</text>
            <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
          </view>
        </view>
      </view>
    </block>
    <view class="moduleContent" wx:if="{{step === 2}}">
      <view style="height: 120rpx" wx:if="{{type === '1'}}">
        <text>营业执照</text>
        <image bind:tap="uploadImg" src="{{businessLicenseUrl ? businessLicenseUrl : defaultPic}}" class="upload" data-name="businessLicenseUrl" data-othername="businessLicenseKsUrl" data-ocr="BUSINESS_LICENSE" data-type='03'></image>
      </view>
      <view>
        <text>商户简称</text>
        <input type="text" value="{{nameCn}}" name="nameCn" placeholder="15字以内" maxlength="15"
          placeholder-class="placeholder" />
      </view>
      <view wx:if="{{type === '1'}}">
        <text>营业执照名称</text>
        <input type="text" value="{{fullNameCn}}" name="fullNameCn" placeholder="30字以内" maxlength="30" placeholder-class="placeholder" />
      </view>
      <view class="inputColor" wx:if="{{type === '1'}}">
        <text>营业执照类型</text>
        <picker name="businessLicense" range="{{businessLicenseTypeList}}" bindchange="changeData" data-type="businessLicense" value="{{businessLicense}}">
          <view>
            <text wx:if='{{businessLicense === null}}' style="font-size: 24rpx">请选择营业执照类型</text>
            <text wx:else style="color: #333333">{{businessLicenseTypeList[businessLicense]}}</text>
            <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
          </view>
        </picker>
      </view>
      <view wx:if="{{type === '1'}}">
        <text>营业执照编号</text>
        <input type="text" name="businessLicenseNo" value="{{businessLicenseNo}}" placeholder="15或18位，只能为数字和字母" maxlength="18" placeholder-class="placeholder" />
      </view>
      <view class="inputColor">
        <text>商户所属地区</text>
        <pickers columnAry="{{areaAry}}" type="area" passType="8" bindpickers="changePickers" data-type='area' />
      </view>
      <textarea value="{{address}}" name="address" placeholder="输入详细地址" style="font-size: 24rpx" placeholder-class="placeholder" maxlength="500"></textarea>
      <view>
        <text>客服电话</text>
        <input type="text" name="customerPhone" value="{{customerPhone}}" placeholder="20位以内" maxlength="20" placeholder-class="placeholder" />
      </view>
      <view>
        <text>联系人电话(选填)</text>
        <input type="text" name="contactMobile" value="{{contactMobile}}" placeholder="11位以内" maxlength="11" placeholder-class="placeholder" />
      </view>
      <view>
        <text>联系人邮箱(选填)</text>
        <input name="contactEmail" value="{{contactEmail}}" type="text" placeholder="输入联系人邮箱" placeholder-class="placeholder" />
      </view>
    </view>
    <view class="moduleContent" wx:if="{{step === 3}}">
      <view>
        <text>账户类型</text>
        <picker name="accountType" range="{{accountTypeList}}" bindchange="changeData" data-type="account" value="{{account}}" wx:if="{{type ==='1'}}">
          <view>
            <text wx:if='{{account === null}}' style="color: #ccc;font-size: 24rpx">请选择账户类型</text>
            <text wx:else style="color: #333333">{{accountTypeList[account]}}</text>
            <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
          </view>
        </picker>
        <text wx:else>个人</text>
      </view>
      <view style="height: 120rpx">
        <text>银行卡</text>
        <image bind:tap="uploadImg2" src="{{bankCard ? bankCard : defaultPic}}" class="upload" data-name="bankCard" data-ocr="BANK_CARD"></image>
      </view>
      <view>
        <text>{{accountType === 2 ? '对公账户' : '银行卡号'}}</text>
        <input type="text" value="{{cardNo}}" name="cardNo" placeholder="32位以内" maxlength="32" placeholder-class="placeholder" />
      </view>
      <view class="inputColor">
        <view>
          <text style="color: #666">开户银行</text>
          <image bind:tap="linkTo" data-url="../../notes/notes?notes=card" src="{{moreinfo}}"></image>
        </view>
        <view bind:tap="toBankList">
          <text wx:if="{{!bankName}}" style="font-size: 24rpx">请选择</text>
          <text wx:else style="color: #333333">{{bankName}}</text>
          <mp-icon icon="arrow" extClass="arrow" color="#aaa" size="15"></mp-icon>
        </view>
      </view>
      <block wx:if="{{accountType === 2}}">
        <view class="inputColor">
          <text>开户支行所属地区</text>
          <pickers columnAry="{{areaAry2}}" type='bankArea' passType="8" bindpickers="changePickers" data-type="bankArea" />
        </view>
        <view>
          <text>开户支行名称</text>
          <input type="text" name="subbranchName" placeholder="20字以内" value="{{subbranchName}}" maxlength="20" placeholder-class="placeholder"/>
        </view>
        <view>
          <text>企业名称</text>
          <input type="text" name="accountHolder" value="{{accountHolder}}" placeholder="30字以内，仅支持中文" maxlength="30" placeholder-class="placeholder" />
        </view>
        <view style="height: 120rpx">
          <text>开户许可证</text>
          <image bind:tap="uploadImg" src="{{openingPermitUrl ? openingPermitUrl : defaultPic}}" class="upload" data-name="openingPermitUrl" data-othername="openingPermitKsUrl"></image>
        </view>
      </block>
      <view style="height: 120rpx">
        <text>{{type === '0' ? '持卡人' : (accountType === 2 ? '法人' : '结算人')}}身份证（人像面）</text>
        <image bind:tap="uploadImg" src="{{identificationOppositeUrl ? identificationOppositeUrl : defaultPic}}" class="upload" data-name="identificationOppositeUrl" data-othername="identificationOppositeKsUrl" data-ocr="IDCARD"></image>
      </view>
      <view style="height: 120rpx">
        <text>{{type === '0' ? '持卡人' : (accountType === 2 ? '法人' : '结算人')}}身份证（国徽面）</text>
        <image bind:tap="uploadImg" src="{{identificationFrontUrl ? identificationFrontUrl : defaultPic}}" class="upload" data-name="identificationFrontUrl" data-othername="identificationFrontKsUrl"></image>
      </view>
      <block wx:if="{{accountType === 2}}">
        <view>
          <text>企业法人</text>
          <input type="text" name="legalPersonName" value="{{legalPersonName}}" placeholder="30字以内，仅支持中文" maxlength="30" placeholder-class="placeholder" />
        </view>
        <view>
          <text>法人身份证号</text>
          <input type="text" name="certNo" value="{{certNo}}" data-name="certNo" bind:blur="changeData" data-type="idCard" placeholder="18字以内" maxlength="18" placeholder-class="placeholder" />
        </view>
      </block>
      <block wx:if="{{accountType === 1}}">
        <view>
          <text>开户人</text>
          <input type="text" name="accountHolder" value="{{accountHolder}}" placeholder="30字以内，仅支持中文" maxlength="30" placeholder-class="placeholder" />
        </view>
        <view>
          <text>{{type === '0' ? '持卡人' : '结算人'}}身份证号</text>
          <input type="text" name="certificateNo" value="{{certificateNo}}" data-name="certificateNo" bind:blur="changeData" data-type="idCard" placeholder="18字以内" maxlength="18" placeholder-class="placeholder" />
        </view>
        <view>
          <text>银行预留手机号</text>
          <input name="mobile" value="{{mobile}}" type="text" placeholder="11位以内" placeholder-class="placeholder" maxlength="11" />
        </view>
      </block>
      <view style="height: 120rpx" wx:if="{{type === '1'}}">
        <text>授权函（可空）</text>
        <image bind:tap="uploadImg" src="{{supplementaryMaterialUrl ? supplementaryMaterialUrl : defaultPic}}" class="upload" data-name="supplementaryMaterialUrl" data-othername="supplementaryMaterialKsUrl"></image>
      </view>
      <view style="height: 120rpx">
        <text>特殊资质1（可空）</text>
        <image bind:tap="uploadImg" src="{{specialAptitudeUrl1 ? specialAptitudeUrl1 : defaultPic}}" class="upload" data-name="specialAptitudeUrl1" data-othername="specialAptitudeKsUrl1"></image>
      </view>
      <view style="height: 120rpx">
        <text>特殊资质2（可空）</text>
        <image bind:tap="uploadImg" src="{{specialAptitudeUrl2 ? specialAptitudeUrl2 : defaultPic}}" class="upload" data-name="specialAptitudeUrl2" data-othername="specialAptitudeKsUrl2"></image>
      </view>
      <view style="height: 120rpx">
        <text>特殊资质3（可空）</text>
        <image bind:tap="uploadImg" src="{{specialAptitudeUrl3 ? specialAptitudeUrl3 : defaultPic}}" class="upload" data-name="specialAptitudeUrl3" data-othername="specialAptitudeKsUrl3"></image>
      </view>
    </view>
    <button form-type="submit" wx:if="{{step === 1}}" data-type="next">下一步</button>
    <view class="stepButton" wx:else>
      <button form-type="submit" data-type="last" class="last">上一步</button>
      <button form-type="submit" data-type="next" class="next" wx:if="{{step < 3}}">下一步</button>
      <button form-type="submit" data-type="submit" class="next" wx:else>提交</button>
    </view>
    <movable-view class="movable-vlew" direction="vertical" x="{{x}}" y="{{y}}" wx:if="{{resubmit === '0' && change === '0'}}">
      <button style="margin: 0" form-type="submit" data-type="save" class="saveBtn">临时保存</button>
    </movable-view>
  </form>
</movable-area>